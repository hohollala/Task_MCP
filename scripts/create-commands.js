#!/usr/bin/env node

import { promises as fs } from 'fs';
import path from 'path';
import { homedir } from 'os';

// Windowsì™€ Unix í™˜ê²½ ëª¨ë‘ ì§€ì›
const commandsDir = path.join(homedir(), '.claude', 'commands');

async function createCommands() {
  try {
    console.log('ğŸ“ ëª…ë ¹ì–´ íŒŒì¼ ìƒì„± ì‹œì‘...');
    console.log(`ğŸ“ ëŒ€ìƒ ê²½ë¡œ: ${commandsDir}`);

    // ~/.claude/commands í´ë” ìƒì„±
    try {
      await fs.mkdir(commandsDir, { recursive: true });
      console.log('âœ… ëª…ë ¹ì–´ ë””ë ‰í† ë¦¬ ìƒì„± ì™„ë£Œ');
    } catch (mkdirError) {
      console.error('âš ï¸ ë””ë ‰í† ë¦¬ ìƒì„± ì¤‘ ì˜¤ë¥˜:', mkdirError.message);
      // ë””ë ‰í† ë¦¬ê°€ ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ê²½ìš° ê³„ì† ì§„í–‰
    }

    // task-new.md ìƒì„±
    const taskNewContent = `# task-new

ğŸ“± ìƒˆ í”„ë¡œì íŠ¸ ìš”êµ¬ì‚¬í•­ ìƒì„±
ì•± ê°œë°œì„ ìœ„í•œ 7ê°€ì§€ í•µì‹¬ ì§ˆë¬¸ì„ í•˜ë‚˜ì”© ë¬¼ì–´ë³´ë©° ì²´ê³„ì ì¸ ìš”êµ¬ì‚¬í•­ ë¬¸ì„œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

## ì„¤ëª…
task-new ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ì•„ë˜ ì§ˆë¬¸ë“¤ì´ ìˆœì°¨ì ìœ¼ë¡œ ì œì‹œë©ë‹ˆë‹¤. ê° ì§ˆë¬¸ì— ë‹µë³€í•˜ë©´ ë‹¤ìŒ ì§ˆë¬¸ìœ¼ë¡œ ë„˜ì–´ê°‘ë‹ˆë‹¤.

## ì§ˆë¬¸ ëª©ë¡
1. **ì•±ì˜ ì£¼ìš” ëª©ì ì€ ë¬´ì—‡ì¸ê°€ìš”?**
   ì˜ˆì‹œ: ì˜¨ë¼ì¸ ì‡¼í•‘ëª°, í• ì¼ ê´€ë¦¬, ì†Œì…œ ë„¤íŠ¸ì›Œí‚¹ ë“±

2. **í•„ìˆ˜ ê¸°ëŠ¥ì€ ì–´ë–¤ ê²ƒë“¤ì´ ìˆë‚˜ìš”?**
   ì˜ˆì‹œ: ì‚¬ìš©ì ë¡œê·¸ì¸, ë°ì´í„° ì €ì¥, ê²°ì œ ì²˜ë¦¬, ì•Œë¦¼ ë“±

3. **ë””ìì¸ì€ ì œê³µë˜ë‚˜ìš”, ì•„ë‹ˆë©´ ì œì‘ì´ í•„ìš”í•˜ì‹ ê°€ìš”?**
   ì˜ˆì‹œ:
   - ì´ë¯¸ ë””ìì¸ íŒŒì¼(Figma, XD ë“±)ì´ ìˆìŒ
   - ê°„ë‹¨í•œ ê¸°ë³¸ ë””ìì¸ìœ¼ë¡œ ì‹œì‘
   - ì™„ì „ ì»¤ìŠ¤í…€ ë””ìì¸ í•„ìš”

4. **ì„œë²„(API)ëŠ” ì œê³µë˜ë‚˜ìš”, ì•„ë‹ˆë©´ ê°œë°œì„ ë§¡ê²¨ì£¼ì‹¤ ê±´ê°€ìš”?**
   ì˜ˆì‹œ:
   - ê¸°ì¡´ API ì„œë²„ ìˆìŒ (URL ì œê³µ)
   - ìƒˆë¡œ ê°œë°œ í•„ìš”
   - Firebase, Supabase ë“± BaaS ì‚¬ìš©

5. **ì™¸ë¶€ ì„œë¹„ìŠ¤ ì—°ë™ì´ í•„ìš”í•œê°€ìš”?**
   ì˜ˆì‹œ: ì†Œì…œ ë¡œê·¸ì¸, ê²°ì œ ê²Œì´íŠ¸ì›¨ì´, ì§€ë„ API, í‘¸ì‹œ ì•Œë¦¼ ë“±

6. **iOS, Android ì¤‘ ì–´ë–¤ í”Œë«í¼ì´ í•„ìš”í•œê°€ìš”?**
   ì˜ˆì‹œ: iOSë§Œ, Androidë§Œ, ë‘˜ ë‹¤, ì›¹ì•±ë„ í¬í•¨

7. **ì›í•˜ì‹œëŠ” ê¸°ìˆ  ìŠ¤íƒì´ë‚˜ ì œí•œì‚¬í•­ì´ ìˆë‚˜ìš”?**
   ì˜ˆì‹œ: React Native, Flutter, ë„¤ì´í‹°ë¸Œ ê°œë°œ, íŠ¹ì • ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©/ê¸ˆì§€

## ì›Œí¬í”Œë¡œìš°
1. task-newë¥¼ ì‹¤í–‰í•˜ë©´ ì²« ë²ˆì§¸ ì§ˆë¬¸ì´ ì œì‹œë©ë‹ˆë‹¤.
2. ê° ì§ˆë¬¸ì— ë‹µë³€í•˜ë©´ ë‹¤ìŒ ì§ˆë¬¸ì´ ìë™ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤.
3. ëª¨ë“  ì§ˆë¬¸ì— ë‹µë³€í•˜ë©´ docs/requirements.md íŒŒì¼ì´ ìƒì„±ë©ë‹ˆë‹¤.

## ìƒì„±ë˜ëŠ” íŒŒì¼
- \`docs/requirements.md\`: í”„ë¡œì íŠ¸ ìš”êµ¬ì‚¬í•­ ìš”ì•½
- \`docs/designed.md\`: ë””ìì¸ ê°€ì´ë“œ
- \`docs/technical_spec.md\`: ê¸°ìˆ  ì‚¬ì–‘ì„œ

## ë‹¤ìŒ ë‹¨ê³„
ëª¨ë“  ì§ˆë¬¸ì— ë‹µë³€í•˜ë©´ task-plan ëª…ë ¹ì–´ë¡œ í”„ë¡œì íŠ¸ ì „ë°˜ì˜ ìš”êµ¬ì‚¬í•­ì„ ì •ë¦¬í•œ docs/requirements.md íŒŒì¼ì´ ìƒì„±ë©ë‹ˆë‹¤.

ğŸ’¡ íŒ: ê° ì§ˆë¬¸ì— ëª…í™•í•˜ê³  êµ¬ì²´ì ìœ¼ë¡œ ë‹µë³€í•˜ë©´ ë” ì •í™•í•œ ìš”êµ¬ì‚¬í•­ ë¬¸ì„œê°€ ìƒì„±ë©ë‹ˆë‹¤.`;

    // task-plan.md ìƒì„±
    const taskPlanContent = `# task-plan

ğŸ“‹ í”„ë¡œì íŠ¸ ê³„íš ìˆ˜ë¦½
ìš”êµ¬ì‚¬í•­ì„ ê¸°ë°˜ìœ¼ë¡œ ì²´ê³„ì ì¸ í”„ë¡œì íŠ¸ ê³„íšì„ ìˆ˜ë¦½í•©ë‹ˆë‹¤.

## ì„¤ëª…
task-plan ëª…ë ¹ì–´ëŠ” ìš”êµ¬ì‚¬í•­ ë¬¸ì„œë¥¼ ë¶„ì„í•˜ì—¬ í”„ë¡œì íŠ¸ì˜ ì „ì²´ì ì¸ ê³„íšì„ ìˆ˜ë¦½í•©ë‹ˆë‹¤.

## ìƒì„±ë˜ëŠ” íŒŒì¼
- \`docs/project_task.md\`: í”„ë¡œì íŠ¸ ì‘ì—… ê³„íš

## ë‹¤ìŒ ë‹¨ê³„
ê³„íš ìˆ˜ë¦½ í›„ task-start ëª…ë ¹ì–´ë¡œ ì²« ë²ˆì§¸ ì‘ì—…ì„ ì‹œì‘í•˜ì„¸ìš”.`;

    // task-start.md ìƒì„±
    const taskStartContent = `# task-start

ğŸš€ ì‘ì—… ì‹œì‘
í”„ë¡œì íŠ¸ ê³„íšì— ë”°ë¼ ë‹¤ìŒ ì‘ì—…ì„ ì‹œì‘í•©ë‹ˆë‹¤.

## ì„¤ëª…
task-start ëª…ë ¹ì–´ëŠ” project_task.md íŒŒì¼ì„ ì½ì–´ì„œ ë‹¤ìŒ ë¯¸ì™„ë£Œ ì‘ì—…ì„ ì°¾ì•„ ì‹œì‘í•©ë‹ˆë‹¤.

## ì›Œí¬í”Œë¡œìš°
1. project_task.mdì—ì„œ ë‹¤ìŒ ë¯¸ì™„ë£Œ ì‘ì—… ì°¾ê¸°
2. ì‘ì—… ì‹œì‘ ë©”ì‹œì§€ ì¶œë ¥
3. ì‘ì—… ìƒíƒœë¥¼ ì§„í–‰ì¤‘ìœ¼ë¡œ ë³€ê²½

## ë‹¤ìŒ ë‹¨ê³„
ì‘ì—… ì™„ë£Œ í›„ task-resume ëª…ë ¹ì–´ë¡œ ë‹¤ìŒ ì‘ì—…ì„ ì§„í–‰í•˜ì„¸ìš”.`;

    // task-resume.md ìƒì„±
    const taskResumeContent = `# task-resume

ğŸ“‹ ì‘ì—… ì¬ê°œ
ì´ì „ ì‘ì—…ì„ ì´ì–´ì„œ ì§„í–‰í•©ë‹ˆë‹¤.

## ì„¤ëª…
task-resume ëª…ë ¹ì–´ëŠ” í˜„ì¬ ì§„í–‰ ìƒí™©ì„ í™•ì¸í•˜ê³  ë‹¤ìŒ ì‘ì—…ì„ ìë™ìœ¼ë¡œ ì‹œì‘í•©ë‹ˆë‹¤.

## ì›Œí¬í”Œë¡œìš°
1. project_task.md íŒŒì¼ í™•ì¸
2. í˜„ì¬ ì§„í–‰ ìƒí™© ë¶„ì„
3. ë‹¤ìŒ ë¯¸ì™„ë£Œ ì‘ì—… ì°¾ê¸°
4. í•´ë‹¹ ì‘ì—… ì‹œì‘

## ë‹¤ìŒ ë‹¨ê³„
ì‘ì—… ì™„ë£Œ í›„ ë‹¤ì‹œ task-resumeì„ ì‹¤í–‰í•˜ì—¬ ë‹¤ìŒ ì‘ì—…ì„ ì§„í–‰í•˜ì„¸ìš”.`;

    // íŒŒì¼ë“¤ ìƒì„±
    const files = [
      { name: 'task-new.md', content: taskNewContent },
      { name: 'task-plan.md', content: taskPlanContent },
      { name: 'task-start.md', content: taskStartContent },
      { name: 'task-resume.md', content: taskResumeContent }
    ];

    for (const file of files) {
      try {
        const filePath = path.join(commandsDir, file.name);
        await fs.writeFile(filePath, file.content, 'utf8');
        console.log(`âœ… ${file.name} ìƒì„± ì™„ë£Œ`);
      } catch (writeError) {
        console.error(`âŒ ${file.name} ìƒì„± ì‹¤íŒ¨:`, writeError.message);
        throw writeError;
      }
    }

    console.log('\nğŸ‰ ëª¨ë“  ëª…ë ¹ì–´ íŒŒì¼ì´ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!');
    console.log(`ğŸ“ ìœ„ì¹˜: ${commandsDir}`);
    console.log('ğŸ“‹ ìƒì„±ëœ íŒŒì¼ë“¤:');
    files.forEach(file => console.log(`  - ${file.name}`));

  } catch (error) {
    console.error('âŒ ëª…ë ¹ì–´ íŒŒì¼ ìƒì„± ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error.message);
    console.error('ğŸ’¡ í•´ê²° ë°©ë²•:');
    console.error('  1. ê´€ë¦¬ì ê¶Œí•œìœ¼ë¡œ ì‹¤í–‰í•´ë³´ì„¸ìš”');
    console.error('  2. ~/.claude/commands í´ë”ì˜ ê¶Œí•œì„ í™•ì¸í•˜ì„¸ìš”');
    console.error('  3. ì•ˆí‹°ë°”ì´ëŸ¬ìŠ¤ í”„ë¡œê·¸ë¨ì´ íŒŒì¼ ìƒì„±ì„ ì°¨ë‹¨í•˜ì§€ ì•ŠëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”');
    process.exit(1);
  }
}

createCommands(); 